{% extends "base.html" %}

{% block content %}
<div class="container mt-5 p-4 bg-light rounded">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="text-dark">{{ event.title }}</h1>
  </div>
  <p class="text-dark">{{ event.content }}</p>
  <p class="text-dark"><strong>Date:</strong> {{ event.date }}</p>
  <p class="text-dark"><strong>Time:</strong> {{ event.time }}</p>
  {% if event.image %}
  <img src="{{ event.image.url }}" class="img-fluid mt-2" alt="{{ event.title }}">
  {% endif %}
  <div class="mt-3">
    <p class="text-dark"><strong>Total Likes:</strong> {{ event.total_likes }}</p>
    {% if user.is_authenticated %}
    <form method="post" action="{% url 'events:like_event' event.id %}">
      {% csrf_token %}
      <button type="submit" class="btn btn-danger">
        <i class="bi bi-hand-thumbs-up me-1"></i> 
        {% if user in event.liked_by.all %}
          Unlike
        {% else %}
          Like
        {% endif %}
        {{ event.liked_by.count }} likes
      </button>
    </form>
    {% else %}
    <p><a href="{% url 'authentication:login' %}">Log in</a> to like this event.</p>
    {% endif %}
  </div>
  <a href="{% url 'events:event_list' %}" class="btn btn-secondary mt-4">Back to Events</a>
</div>
{% endblock %}

